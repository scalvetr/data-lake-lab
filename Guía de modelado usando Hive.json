{"paragraphs":[{"text":"%md\n\n# Guía de modelado usando Hive\n\nEn este notebook aprenderemos a explorar distintos servicios del entorno Hadoop y a como organizar la información para poder obtener el máximo beneficio de la misma. \n\nPrimero exploraremos los datos sobre el HDFS para posteriormente definir una estructura explotable acorde a nuestras necesidades mediante el uso de Hive.\n","user":"anonymous","dateUpdated":"2020-05-20T15:53:11+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Guía de modelado usando Hive</h1>\n<p>En este notebook aprenderemos a explorar distintos servicios del entorno Hadoop y a como organizar la información para poder obtener el máximo beneficio de la misma.</p>\n<p>Primero exploraremos los datos sobre el HDFS para posteriormente definir una estructura explotable acorde a nuestras necesidades mediante el uso de Hive.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305358_-1045629097","id":"20200426-122547_273599446","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:53:11+0000","dateFinished":"2020-05-20T15:53:16+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:322"},{"text":"%md\n\n# Hadoop Distributed File System\n\nPrimero, podremos explorar la estructura de directorios disponible en nuestro sistema empleando los comandos que ya conoceis:\n- hdfs dfs ...\n\nSentiros libres de variar el directorio para explorar el sistema ;)","user":"anonymous","dateUpdated":"2020-05-20T15:53:41+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Hadoop Distributed File System</h1>\n<p>Primero, podremos explorar la estructura de directorios disponible en nuestro sistema empleando los comandos que ya conoceis:</p>\n<ul>\n<li>hdfs dfs &hellip;</li>\n</ul>\n<p>Sentiros libres de variar el directorio para explorar el sistema ;)</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305413_215041851","id":"20200426-144330_450022757","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:53:41+0000","dateFinished":"2020-05-20T15:53:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:323"},{"text":"%sh\n\nhdfs dfs -ls /\n","user":"anonymous","dateUpdated":"2020-05-20T15:53:48+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 13 items\ndrwxrwxrwt   - yarn   hadoop          0 2020-05-03 12:28 /app-logs\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 19:01 /apps\ndrwxr-xr-x   - yarn   hadoop          0 2018-11-29 17:25 /ats\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 17:26 /atsv2\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 17:26 /hdp\ndrwx------   - livy   hdfs            0 2018-11-29 17:55 /livy2-recovery\ndrwxr-xr-x   - mapred hdfs            0 2018-11-29 17:26 /mapred\ndrwxrwxrwx   - mapred hadoop          0 2018-11-29 17:26 /mr-history\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 18:54 /ranger\ndrwxrwxrwx   - spark  hadoop          0 2020-05-20 15:53 /spark2-history\ndrwxrwxrwx   - hdfs   hdfs            0 2020-05-06 17:01 /tmp\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 19:21 /user\ndrwxr-xr-x   - hdfs   hdfs            0 2018-11-29 17:51 /warehouse\n"}]},"apps":[],"jobName":"paragraph_1588505305432_-362582093","id":"20200426-144841_1544325820","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:53:49+0000","dateFinished":"2020-05-20T15:53:57+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:324"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed\n","user":"anonymous","dateUpdated":"2020-05-20T15:54:02+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 1 items\ndrwxrwxrwx+  - hive hadoop          0 2020-05-06 17:34 /warehouse/tablespace/managed/hive\n"}]},"apps":[],"jobName":"paragraph_1588505305442_-59339338","id":"20200426-143950_1829511711","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:54:03+0000","dateFinished":"2020-05-20T15:54:15+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:325"},{"text":"%md\n\nYa tenemos clara la estructura de directorios. De hecho, si habéis reparado en la carpeta /warehouse habréis visto que es donde se plantea la creación de bases de datos y tablas tanto gestionadas por Hive como externas. Esto significa que si creamos una base de datos para nuestras pruebas aparecerá un directorio con un nombre sospechosamente similar al nombre de la base de datos...\n\n¿Por qué será?\n","user":"anonymous","dateUpdated":"2020-05-20T15:55:36+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":8,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Ya tenemos clara la estructura de directorios. De hecho, si habéis reparado en la carpeta /warehouse habréis visto que es donde se plantea la creación de bases de datos y tablas tanto gestionadas por Hive como externas. Esto significa que si creamos una base de datos para nuestras pruebas aparecerá un directorio con un nombre sospechosamente similar al nombre de la base de datos&hellip;</p>\n<p>¿Por qué será?</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305457_38890269","id":"20200426-144738_106243242","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:55:36+0000","dateFinished":"2020-05-20T15:55:36+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:326"},{"text":"%jdbc(hive)\n\ncreate database uoc\n","user":"anonymous","dateUpdated":"2020-05-20T15:55:19+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":4,"editorMode":"ace/mode/sql","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1588505305461_2053382058","id":"20200426-144322_921967951","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:32:37+0000","dateFinished":"2020-05-03T11:32:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:327"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive\n","user":"anonymous","dateUpdated":"2020-05-03T11:33:01+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 3 items\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:01 /warehouse/tablespace/managed/hive/foodmart.db\ndrwxrwxrwx+  - hdfs hadoop          0 2020-05-02 07:39 /warehouse/tablespace/managed/hive/sys.db\ndrwxrwxrwx+  - hive hadoop          0 2020-05-03 11:32 /warehouse/tablespace/managed/hive/uoc.db\n"}]},"apps":[],"jobName":"paragraph_1588505305470_-893607724","id":"20200426-145312_781395880","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:33:01+0000","dateFinished":"2020-05-03T11:33:12+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:328"},{"text":"%jdbc(hive)\n\nshow databases","user":"anonymous","dateUpdated":"2020-05-03T11:33:19+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionKey":"TAB","completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"database_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"database_name\ndefault\nfoodmart\ninformation_schema\nsys\nuoc\n"}]},"apps":[],"jobName":"paragraph_1588505305476_-2083441332","id":"20200426-122147_524575875","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:33:20+0000","dateFinished":"2020-05-03T11:33:21+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:329"},{"text":"%md\n\nDel mismo modo, la creación de tablas no es más que la creación de una subcarpeta bajo esta carpeta y el registro de metadatos relativos a cómo interpretar los ficheros existentes en la misma. Veamos por ejemplo la base de datos foodmart:\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Del mismo modo, la creación de tablas no es más que la creación de una subcarpeta bajo esta carpeta y el registro de metadatos relativos a cómo interpretar los ficheros existentes en la misma. Veamos por ejemplo la base de datos foodmart:</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305489_-914184494","id":"20200426-122909_866975386","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:330"},{"text":"%jdbc(hive)\n\nuse foodmart;\n\nshow tables;\n","user":"anonymous","dateUpdated":"2020-05-03T11:33:33+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"1":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"tab_name":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TABLE","data":"tab_name\naccount\nagg_c_10_sales_fact_1997\nagg_c_14_sales_fact_1997\nagg_c_special_sales_fact_1997\nagg_g_ms_pcat_sales_fact_1997\nagg_l_03_sales_fact_1997\nagg_l_04_sales_fact_1997\nagg_l_05_sales_fact_1997\nagg_lc_06_sales_fact_1997\nagg_lc_100_sales_fact_1997\nagg_ll_01_sales_fact_1997\nagg_pl_01_sales_fact_1997\ncategory\ncurrency\ncustomer\ndays\ndepartment\nemployee\nemployee_closure\nexpense_fact\ninventory_fact_1997\ninventory_fact_1998\nposition\nproduct\nproduct_class\npromotion\nregion\nreserve_employee\nsalary\nsales_fact_1997\nsales_fact_1998\nsales_fact_dec_1998\nstore\nstore_ragged\ntime_by_day\nwarehouse\nwarehouse_class\n"}]},"apps":[],"jobName":"paragraph_1588505305503_-2089953714","id":"20200426-145757_235655719","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:33:34+0000","dateFinished":"2020-05-03T11:33:34+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:331"},{"text":"%md\n\nY la carpeta foodmart:","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Y la carpeta foodmart:</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305511_-361894767","id":"20200426-145946_824857275","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:332"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive/foodmart.db\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 37 items\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:04 /warehouse/tablespace/managed/hive/foodmart.db/account\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:07 /warehouse/tablespace/managed/hive/foodmart.db/agg_c_10_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:07 /warehouse/tablespace/managed/hive/foodmart.db/agg_c_14_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:07 /warehouse/tablespace/managed/hive/foodmart.db/agg_c_special_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:07 /warehouse/tablespace/managed/hive/foodmart.db/agg_g_ms_pcat_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:07 /warehouse/tablespace/managed/hive/foodmart.db/agg_l_03_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_l_04_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_l_05_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_lc_06_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_lc_100_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_ll_01_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/agg_pl_01_sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/category\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/currency\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/customer\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/days\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/department\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/employee\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/employee_closure\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/expense_fact\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/inventory_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/inventory_fact_1998\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/position\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/product\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/product_class\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/promotion\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/region\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/reserve_employee\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/salary\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/sales_fact_1997\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:08 /warehouse/tablespace/managed/hive/foodmart.db/sales_fact_1998\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/sales_fact_dec_1998\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/store\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/store_ragged\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/time_by_day\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/warehouse\ndrwxrwxrwx   - hive hadoop          0 2018-11-29 18:09 /warehouse/tablespace/managed/hive/foodmart.db/warehouse_class\n"}]},"apps":[],"jobName":"paragraph_1588505305512_-922716023","id":"20200426-145846_1399661917","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:333"},{"text":"%md\n\nSospechoso ¿verdad? ... Exploremos el nexo entre ambos. Si lanzamos una consulta *describe formatted* sobre una tabla nos devolverá toda la metainformación dispontble sobre la misma.\n","user":"anonymous","dateUpdated":"2020-05-20T15:57:05+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Sospechoso ¿verdad? &hellip; Exploremos el nexo entre ambos. Si lanzamos una consulta <em>describe formatted</em> sobre una tabla nos devolverá toda la metainformación dispontble sobre la misma.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305523_-2011910536","id":"20200426-150043_95461924","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T15:57:05+0000","dateFinished":"2020-05-20T15:57:05+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:334"},{"text":"%jdbc(hive)\n\ndescribe formatted foodmart.sales_fact_1997\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"col_name\tdata_type\tcomment\n# col_name\tdata_type\tcomment\nproduct_id\tint\t\ntime_id\tint\t\ncustomer_id\tint\t\npromotion_id\tint\t\nstore_id\tint\t\nstore_sales\tdecimal(10,4)\t\nstore_cost\tdecimal(10,4)\t\nunit_sales\tdecimal(10,4)\t\n\tnull\tnull\n# Detailed Table Information\tnull\tnull\nDatabase:           \tfoodmart            \tnull\nOwnerType:          \tUSER                \tnull\nOwner:              \thive                \tnull\nCreateTime:         \tThu Nov 29 18:04:13 UTC 2018\tnull\nLastAccessTime:     \tUNKNOWN             \tnull\nRetention:          \t0                   \tnull\nLocation:           \thdfs://sandbox-hdp.hortonworks.com:8020/warehouse/tablespace/managed/hive/foodmart.db/sales_fact_1997\tnull\nTable Type:         \tMANAGED_TABLE       \tnull\nTable Parameters:\tnull\tnull\n\tCOLUMN_STATS_ACCURATE\t{\\\"BASIC_STATS\\\":\\\"true\\\",\\\"COLUMN_STATS\\\":{\\\"customer_id\\\":\\\"true\\\",\\\"product_id\\\":\\\"true\\\",\\\"promotion_id\\\":\\\"true\\\",\\\"store_cost\\\":\\\"true\\\",\\\"store_id\\\":\\\"true\\\",\\\"store_sales\\\":\\\"true\\\",\\\"time_id\\\":\\\"true\\\",\\\"unit_sales\\\":\\\"true\\\"}}\n\tbucketing_version   \t2                   \n\tnumFiles            \t1                   \n\tnumRows             \t86837               \n\trawDataSize         \t0                   \n\ttotalSize           \t749923              \n\ttransactional       \ttrue                \n\ttransactional_properties\tdefault             \n\ttransient_lastDdlTime\t1543514938          \n\tnull\tnull\n# Storage Information\tnull\tnull\nSerDe Library:      \torg.apache.hadoop.hive.ql.io.orc.OrcSerde\tnull\nInputFormat:        \torg.apache.hadoop.hive.ql.io.orc.OrcInputFormat\tnull\nOutputFormat:       \torg.apache.hadoop.hive.ql.io.orc.OrcOutputFormat\tnull\nCompressed:         \tNo                  \tnull\nNum Buckets:        \t-1                  \tnull\nBucket Columns:     \t[]                  \tnull\nSort Columns:       \t[]                  \tnull\nStorage Desc Params:\tnull\tnull\n\tserialization.format\t1                   \n"}]},"apps":[],"jobName":"paragraph_1588505305524_2119529807","id":"20200426-150235_507942577","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:335"},{"text":"%md\n\nEste mecanismo es lo que nos permite traducir el SQL impuesto a Hive en procesos MapReduce, Tez o Spark (los distintos motores de ejecución disponibles en distintas epocas) que sean capaces de interpretar y procesar la información requerida.\n\n![Hive Architecture](http://1.bp.blogspot.com/-6VBHHXl96t4/WIJp8lQ2c6I/AAAAAAAAAPs/Nyfq02y87mEToUtfBDqt_8-GhPJgIPfkgCK4B/s1600/hive_architecture.jpg)","user":"anonymous","dateUpdated":"2020-05-20T16:00:16+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Este mecanismo es lo que nos permite traducir el SQL impuesto a Hive en procesos MapReduce, Tez o Spark (los distintos motores de ejecución disponibles en distintas epocas) que sean capaces de interpretar y procesar la información requerida.</p>\n<p><img src=\"http://1.bp.blogspot.com/-6VBHHXl96t4/WIJp8lQ2c6I/AAAAAAAAAPs/Nyfq02y87mEToUtfBDqt_8-GhPJgIPfkgCK4B/s1600/hive_architecture.jpg\" alt=\"Hive Architecture\" /></p>\n"}]},"apps":[],"jobName":"paragraph_1588505305525_1527724382","id":"20200426-150418_1686334589","dateCreated":"2020-05-03T11:28:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:336","dateFinished":"2020-05-20T16:00:16+0000","dateStarted":"2020-05-20T16:00:16+0000"},{"text":"%jdbc(hive)\n\nSELECT SUM(unit_sales) AS unidades, product_id AS producto FROM foodmart.sales_fact_1997 GROUp BY product_id ORDER BY 1 DESC\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"unidades":"string","producto":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false},"multiBarChart":{"rotate":{"degree":"-45"},"xLabelStatus":"default"}},"commonSetting":{},"keys":[{"name":"unidades","index":0,"aggr":"sum"}],"groups":[],"values":[{"name":"producto","index":1,"aggr":"sum"}]},"helium":{}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"unidades\tproducto\n267.0000\t952\n258.0000\t549\n257.0000\t1452\n252.0000\t948\n246.0000\t404\n245.0000\t609\n243.0000\t455\n242.0000\t414\n240.0000\t928\n239.0000\t1428\n238.0000\t11\n236.0000\t645\n235.0000\t1446\n234.0000\t371\n234.0000\t629\n234.0000\t529\n234.0000\t428\n233.0000\t915\n232.0000\t413\n231.0000\t417\n231.0000\t384\n231.0000\t443\n231.0000\t502\n231.0000\t400\n230.0000\t1453\n229.0000\t1398\n229.0000\t914\n228.0000\t897\n228.0000\t426\n228.0000\t593\n228.0000\t840\n227.0000\t938\n227.0000\t975\n227.0000\t995\n227.0000\t905\n226.0000\t1409\n226.0000\t390\n226.0000\t909\n225.0000\t447\n224.0000\t1434\n224.0000\t873\n224.0000\t394\n223.0000\t956\n222.0000\t407\n222.0000\t925\n221.0000\t1441\n221.0000\t1086\n221.0000\t456\n221.0000\t568\n220.0000\t1423\n220.0000\t480\n220.0000\t1171\n220.0000\t1392\n220.0000\t1018\n220.0000\t1554\n220.0000\t882\n219.0000\t1380\n219.0000\t860\n218.0000\t849\n218.0000\t415\n218.0000\t862\n218.0000\t86\n218.0000\t132\n218.0000\t1362\n217.0000\t964\n217.0000\t337\n217.0000\t477\n217.0000\t96\n217.0000\t968\n216.0000\t869\n216.0000\t982\n216.0000\t466\n216.0000\t1458\n216.0000\t836\n215.0000\t908\n215.0000\t463\n215.0000\t939\n215.0000\t536\n215.0000\t541\n214.0000\t441\n214.0000\t1491\n214.0000\t692\n214.0000\t1282\n214.0000\t1206\n214.0000\t1123\n213.0000\t1291\n213.0000\t519\n213.0000\t622\n213.0000\t1162\n213.0000\t1454\n213.0000\t427\n213.0000\t718\n212.0000\t370\n212.0000\t969\n212.0000\t1447\n211.0000\t791\n211.0000\t725\n211.0000\t1431\n211.0000\t501\n211.0000\t1012\n211.0000\t1443\n210.0000\t814\n210.0000\t1046\n210.0000\t900\n210.0000\t465\n210.0000\t264\n210.0000\t437\n210.0000\t1495\n210.0000\t895\n210.0000\t827\n210.0000\t855\n210.0000\t378\n209.0000\t712\n209.0000\t1298\n209.0000\t896\n209.0000\t1396\n209.0000\t21\n209.0000\t1124\n209.0000\t312\n208.0000\t830\n208.0000\t1378\n208.0000\t965\n208.0000\t617\n208.0000\t434\n208.0000\t623\n208.0000\t1389\n207.0000\t1448\n207.0000\t797\n207.0000\t937\n207.0000\t1471\n207.0000\t362\n207.0000\t70\n207.0000\t1092\n207.0000\t903\n207.0000\t485\n207.0000\t813\n206.0000\t48\n206.0000\t1134\n206.0000\t1411\n206.0000\t43\n206.0000\t385\n205.0000\t250\n205.0000\t648\n205.0000\t971\n205.0000\t66\n205.0000\t420\n205.0000\t1387\n205.0000\t887\n205.0000\t440\n205.0000\t634\n205.0000\t1044\n205.0000\t660\n205.0000\t472\n205.0000\t1438\n204.0000\t1320\n204.0000\t1199\n204.0000\t1275\n204.0000\t976\n204.0000\t349\n204.0000\t412\n204.0000\t261\n204.0000\t590\n204.0000\t848\n204.0000\t525\n204.0000\t379\n204.0000\t576\n203.0000\t567\n203.0000\t1336\n203.0000\t254\n203.0000\t1136\n203.0000\t1019\n203.0000\t334\n203.0000\t336\n203.0000\t446\n203.0000\t511\n203.0000\t1410\n203.0000\t353\n203.0000\t1063\n202.0000\t1383\n202.0000\t1435\n202.0000\t357\n202.0000\t419\n202.0000\t1377\n202.0000\t1048\n202.0000\t1148\n202.0000\t1417\n202.0000\t1463\n202.0000\t947\n202.0000\t422\n202.0000\t481\n201.0000\t482\n201.0000\t410\n201.0000\t153\n201.0000\t416\n201.0000\t454\n201.0000\t597\n201.0000\t1176\n201.0000\t934\n201.0000\t522\n200.0000\t406\n200.0000\t1337\n200.0000\t1394\n200.0000\t1212\n200.0000\t984\n200.0000\t1420\n200.0000\t44\n200.0000\t1415\n200.0000\t991\n199.0000\t442\n199.0000\t292\n199.0000\t603\n199.0000\t399\n199.0000\t929\n199.0000\t1031\n199.0000\t960\n199.0000\t884\n199.0000\t1429\n199.0000\t639\n199.0000\t90\n199.0000\t1150\n199.0000\t42\n199.0000\t1500\n199.0000\t126\n198.0000\t1154\n198.0000\t1070\n198.0000\t344\n198.0000\t881\n198.0000\t563\n198.0000\t551\n198.0000\t1000\n198.0000\t1213\n198.0000\t894\n198.0000\t460\n198.0000\t1407\n198.0000\t967\n198.0000\t1302\n198.0000\t959\n198.0000\t1166\n197.0000\t490\n197.0000\t1477\n197.0000\t411\n197.0000\t262\n197.0000\t1091\n197.0000\t1366\n197.0000\t1467\n197.0000\t231\n197.0000\t550\n197.0000\t996\n197.0000\t1126\n197.0000\t638\n197.0000\t535\n197.0000\t1295\n197.0000\t611\n197.0000\t1053\n196.0000\t421\n196.0000\t1243\n196.0000\t382\n196.0000\t1536\n196.0000\t951\n196.0000\t1036\n196.0000\t1473\n196.0000\t1436\n196.0000\t1526\n196.0000\t979\n196.0000\t854\n196.0000\t1004\n195.0000\t468\n195.0000\t451\n195.0000\t1422\n195.0000\t819\n195.0000\t1501\n195.0000\t1421\n195.0000\t966\n195.0000\t1456\n195.0000\t1403\n195.0000\t1228\n195.0000\t1224\n195.0000\t1087\n195.0000\t1079\n195.0000\t1068\n195.0000\t1024\n195.0000\t1002\n195.0000\t436\n195.0000\t544\n195.0000\t527\n194.0000\t953\n194.0000\t993\n194.0000\t523\n194.0000\t492\n194.0000\t12\n194.0000\t138\n194.0000\t1357\n194.0000\t30\n194.0000\t116\n194.0000\t1266\n194.0000\t408\n194.0000\t614\n194.0000\t1538\n194.0000\t901\n194.0000\t917\n194.0000\t691\n194.0000\t844\n193.0000\t1339\n193.0000\t317\n193.0000\t865\n193.0000\t1120\n193.0000\t592\n193.0000\t872\n193.0000\t1288\n193.0000\t926\n193.0000\t883\n193.0000\t1268\n193.0000\t931\n193.0000\t8\n193.0000\t606\n192.0000\t671\n192.0000\t439\n192.0000\t1353\n192.0000\t946\n192.0000\t483\n192.0000\t271\n192.0000\t1511\n192.0000\t1479\n192.0000\t107\n192.0000\t1084\n192.0000\t1343\n192.0000\t1222\n192.0000\t1344\n192.0000\t1506\n192.0000\t812\n192.0000\t1426\n192.0000\t1504\n192.0000\t1299\n192.0000\t112\n192.0000\t1342\n191.0000\t961\n191.0000\t1547\n191.0000\t304\n191.0000\t1172\n191.0000\t644\n191.0000\t36\n191.0000\t1185\n191.0000\t1198\n191.0000\t504\n191.0000\t1055\n191.0000\t328\n191.0000\t1382\n191.0000\t748\n191.0000\t1121\n190.0000\t62\n190.0000\t425\n190.0000\t358\n190.0000\t820\n190.0000\t29\n190.0000\t1433\n190.0000\t1041\n190.0000\t1227\n190.0000\t1365\n190.0000\t1405\n190.0000\t1413\n190.0000\t1058\n190.0000\t307\n190.0000\t997\n190.0000\t360\n190.0000\t930\n190.0000\t484\n190.0000\t772\n189.0000\t1265\n189.0000\t608\n189.0000\t547\n189.0000\t572\n189.0000\t643\n189.0000\t546\n189.0000\t315\n189.0000\t227\n189.0000\t600\n189.0000\t595\n189.0000\t904\n189.0000\t916\n189.0000\t856\n189.0000\t345\n189.0000\t751\n189.0000\t706\n189.0000\t1100\n189.0000\t1122\n189.0000\t1278\n189.0000\t1308\n189.0000\t1376\n189.0000\t1494\n189.0000\t542\n189.0000\t898\n188.0000\t505\n188.0000\t1077\n188.0000\t469\n188.0000\t1499\n188.0000\t1546\n188.0000\t970\n188.0000\t958\n188.0000\t486\n188.0000\t822\n188.0000\t518\n188.0000\t1316\n188.0000\t1470\n188.0000\t1235\n188.0000\t871\n188.0000\t1301\n188.0000\t902\n188.0000\t911\n188.0000\t119\n188.0000\t566\n188.0000\t1057\n187.0000\t1064\n187.0000\t1432\n187.0000\t1256\n187.0000\t1545\n187.0000\t584\n187.0000\t986\n187.0000\t1287\n187.0000\t372\n187.0000\t1088\n187.0000\t933\n187.0000\t562\n187.0000\t910\n187.0000\t1204\n186.0000\t1356\n186.0000\t493\n186.0000\t1519\n186.0000\t182\n186.0000\t403\n186.0000\t498\n186.0000\t570\n186.0000\t733\n186.0000\t778\n186.0000\t837\n186.0000\t118\n186.0000\t1465\n186.0000\t233\n186.0000\t462\n186.0000\t380\n186.0000\t1412\n186.0000\t297\n186.0000\t398\n186.0000\t1190\n186.0000\t1007\n186.0000\t1276\n186.0000\t1530\n185.0000\t866\n185.0000\t613\n185.0000\t1089\n185.0000\t987\n185.0000\t195\n185.0000\t581\n185.0000\t1558\n185.0000\t180\n185.0000\t373\n185.0000\t402\n185.0000\t409\n185.0000\t580\n185.0000\t786\n185.0000\t885\n185.0000\t924\n185.0000\t1138\n185.0000\t1368\n185.0000\t1445\n184.0000\t339\n184.0000\t1439\n184.0000\t826\n184.0000\t1047\n184.0000\t364\n184.0000\t82\n184.0000\t1460\n184.0000\t503\n184.0000\t1203\n184.0000\t1455\n184.0000\t318\n184.0000\t1011\n184.0000\t1066\n184.0000\t852\n184.0000\t1414\n184.0000\t574\n184.0000\t61\n184.0000\t1156\n184.0000\t1192\n184.0000\t656\n184.0000\t1208\n184.0000\t478\n184.0000\t1341\n184.0000\t875\n184.0000\t163\n184.0000\t594\n184.0000\t543\n184.0000\t863\n184.0000\t1016\n183.0000\t1317\n183.0000\t1372\n183.0000\t489\n183.0000\t683\n183.0000\t662\n183.0000\t892\n183.0000\t1539\n183.0000\t1059\n183.0000\t1373\n183.0000\t575\n183.0000\t397\n183.0000\t418\n183.0000\t1324\n183.0000\t376\n183.0000\t528\n183.0000\t1200\n183.0000\t850\n183.0000\t433\n182.0000\t1533\n182.0000\t569\n182.0000\t807\n182.0000\t137\n182.0000\t375\n182.0000\t1042\n182.0000\t1218\n182.0000\t514\n182.0000\t309\n182.0000\t1363\n182.0000\t497\n182.0000\t1281\n182.0000\t589\n182.0000\t990\n182.0000\t1349\n182.0000\t448\n182.0000\t521\n182.0000\t25\n182.0000\t475\n182.0000\t1232\n181.0000\t1177\n181.0000\t674\n181.0000\t552\n181.0000\t1300\n181.0000\t630\n181.0000\t445\n181.0000\t526\n181.0000\t1493\n181.0000\t1217\n181.0000\t438\n180.0000\t943\n180.0000\t627\n180.0000\t825\n180.0000\t476\n180.0000\t1161\n180.0000\t109\n180.0000\t583\n180.0000\t1472\n180.0000\t1424\n180.0000\t53\n180.0000\t1485\n180.0000\t935\n180.0000\t7\n180.0000\t98\n180.0000\t1384\n180.0000\t127\n180.0000\t506\n180.0000\t1425\n180.0000\t89\n180.0000\t393\n180.0000\t1400\n180.0000\t1020\n180.0000\t1021\n179.0000\t1330\n179.0000\t133\n179.0000\t1487\n179.0000\t432\n179.0000\t859\n179.0000\t992\n179.0000\t1492\n179.0000\t777\n179.0000\t1022\n179.0000\t1390\n179.0000\t202\n179.0000\t311\n179.0000\t636\n179.0000\t1234\n179.0000\t977\n179.0000\t941\n179.0000\t1152\n178.0000\t838\n178.0000\t274\n178.0000\t391\n178.0000\t366\n178.0000\t1496\n178.0000\t1332\n178.0000\t1418\n178.0000\t1322\n178.0000\t1251\n178.0000\t696\n178.0000\t1093\n178.0000\t1284\n178.0000\t765\n178.0000\t467\n178.0000\t1082\n178.0000\t1556\n178.0000\t1155\n178.0000\t6\n178.0000\t1149\n177.0000\t994\n177.0000\t27\n177.0000\t1483\n177.0000\t1401\n177.0000\t1311\n177.0000\t1249\n177.0000\t1182\n177.0000\t980\n177.0000\t972\n177.0000\t585\n177.0000\t587\n177.0000\t847\n177.0000\t804\n177.0000\t685\n177.0000\t1073\n177.0000\t664\n177.0000\t374\n177.0000\t1505\n177.0000\t495\n177.0000\t1305\n177.0000\t727\n177.0000\t927\n176.0000\t1107\n176.0000\t1014\n176.0000\t999\n176.0000\t255\n176.0000\t612\n176.0000\t435\n176.0000\t139\n176.0000\t1451\n176.0000\t19\n176.0000\t389\n176.0000\t738\n176.0000\t179\n176.0000\t1165\n176.0000\t313\n176.0000\t565\n176.0000\t879\n176.0000\t1292\n176.0000\t633\n176.0000\t642\n176.0000\t143\n176.0000\t100\n176.0000\t805\n175.0000\t369\n175.0000\t963\n175.0000\t350\n175.0000\t1223\n175.0000\t1246\n175.0000\t1406\n175.0000\t368\n175.0000\t861\n175.0000\t37\n175.0000\t1498\n175.0000\t24\n175.0000\t548\n175.0000\t1510\n175.0000\t1129\n175.0000\t258\n175.0000\t666\n175.0000\t1464\n175.0000\t921\n175.0000\t618\n175.0000\t794\n175.0000\t340\n175.0000\t880\n175.0000\t1050\n175.0000\t1211\n175.0000\t1028\n175.0000\t579\n175.0000\t28\n175.0000\t1480\n175.0000\t388\n175.0000\t554\n175.0000\t553\n175.0000\t893\n174.0000\t983\n174.0000\t95\n174.0000\t787\n174.0000\t842\n174.0000\t81\n174.0000\t841\n174.0000\t1419\n174.0000\t663\n174.0000\t223\n174.0000\t1153\n174.0000\t1503\n174.0000\t876\n174.0000\t341\n174.0000\t1475\n174.0000\t1006\n174.0000\t1313\n174.0000\t770\n174.0000\t1314\n174.0000\t17\n174.0000\t577\n174.0000\t120\n174.0000\t500\n174.0000\t746\n174.0000\t84\n174.0000\t46\n174.0000\t1369\n174.0000\t668\n174.0000\t1078\n174.0000\t244\n174.0000\t832\n174.0000\t679\n173.0000\t558\n173.0000\t1114\n173.0000\t839\n173.0000\t76\n173.0000\t539\n173.0000\t1245\n173.0000\t39\n173.0000\t45\n173.0000\t423\n173.0000\t582\n173.0000\t1262\n173.0000\t331\n173.0000\t721\n173.0000\t1450\n173.0000\t461\n173.0000\t1437\n173.0000\t1030\n173.0000\t1461\n173.0000\t1090\n173.0000\t803\n172.0000\t690\n172.0000\t513\n172.0000\t1319\n172.0000\t161\n172.0000\t194\n172.0000\t573\n172.0000\t1179\n172.0000\t302\n172.0000\t487\n172.0000\t1054\n172.0000\t216\n172.0000\t316\n172.0000\t1489\n172.0000\t899\n172.0000\t710\n172.0000\t800\n172.0000\t1482\n172.0000\t833\n172.0000\t1271\n172.0000\t1516\n171.0000\t1557\n171.0000\t383\n171.0000\t479\n171.0000\t675\n171.0000\t735\n171.0000\t749\n171.0000\t760\n171.0000\t2\n171.0000\t858\n171.0000\t950\n171.0000\t1325\n171.0000\t458\n171.0000\t912\n171.0000\t1528\n171.0000\t1119\n171.0000\t67\n171.0000\t724\n171.0000\t795\n171.0000\t774\n171.0000\t1072\n170.0000\t652\n170.0000\t1105\n170.0000\t559\n170.0000\t1457\n170.0000\t1106\n170.0000\t1250\n170.0000\t689\n170.0000\t259\n170.0000\t1347\n170.0000\t788\n170.0000\t228\n170.0000\t386\n170.0000\t815\n170.0000\t499\n170.0000\t1096\n170.0000\t222\n170.0000\t1416\n170.0000\t1005\n170.0000\t164\n170.0000\t1209\n170.0000\t1104\n170.0000\t75\n169.0000\t878\n169.0000\t1257\n169.0000\t1103\n169.0000\t41\n169.0000\t1173\n169.0000\t392\n169.0000\t808\n169.0000\t1360\n169.0000\t1231\n169.0000\t464\n169.0000\t1297\n169.0000\t1023\n169.0000\t1237\n169.0000\t1144\n169.0000\t168\n169.0000\t1039\n169.0000\t615\n169.0000\t381\n169.0000\t395\n169.0000\t1531\n169.0000\t1183\n168.0000\t214\n168.0000\t605\n168.0000\t610\n168.0000\t1267\n168.0000\t728\n168.0000\t1402\n168.0000\t823\n168.0000\t78\n168.0000\t888\n168.0000\t922\n168.0000\t283\n168.0000\t115\n168.0000\t60\n168.0000\t1003\n168.0000\t1017\n168.0000\t1252\n168.0000\t188\n168.0000\t798\n168.0000\t1462\n168.0000\t806\n168.0000\t1009\n168.0000\t452\n168.0000\t54\n168.0000\t599\n168.0000\t1350\n168.0000\t540\n168.0000\t333\n168.0000\t1490\n168.0000\t998\n168.0000\t677\n168.0000\t205\n168.0000\t111\n167.0000\t249\n167.0000\t688\n167.0000\t342\n167.0000\t405\n167.0000\t1523\n167.0000\t424\n167.0000\t1037\n167.0000\t601\n167.0000\t868\n167.0000\t1283\n167.0000\t206\n167.0000\t906\n167.0000\t1543\n167.0000\t508\n167.0000\t1069\n167.0000\t978\n167.0000\t620\n167.0000\t1534\n167.0000\t537\n167.0000\t936\n167.0000\t835\n167.0000\t564\n167.0000\t598\n167.0000\t816\n167.0000\t1269\n167.0000\t322\n167.0000\t695\n167.0000\t1550\n167.0000\t1397\n167.0000\t162\n166.0000\t335\n166.0000\t1527\n166.0000\t1553\n166.0000\t329\n166.0000\t348\n166.0000\t1552\n166.0000\t1355\n166.0000\t1187\n166.0000\t918\n166.0000\t571\n166.0000\t1111\n166.0000\t731\n166.0000\t1296\n166.0000\t1015\n166.0000\t347\n166.0000\t275\n166.0000\t1219\n166.0000\t429\n166.0000\t954\n166.0000\t1040\n166.0000\t687\n166.0000\t1254\n166.0000\t782\n166.0000\t769\n166.0000\t649\n166.0000\t831\n166.0000\t1549\n165.0000\t278\n165.0000\t40\n165.0000\t1440\n165.0000\t74\n165.0000\t130\n165.0000\t1351\n165.0000\t457\n165.0000\t1529\n165.0000\t34\n165.0000\t1141\n165.0000\t1525\n165.0000\t962\n165.0000\t85\n165.0000\t515\n165.0000\t604\n165.0000\t234\n165.0000\t211\n165.0000\t889\n164.0000\t974\n164.0000\t877\n164.0000\t444\n164.0000\t1097\n164.0000\t1408\n164.0000\t277\n164.0000\t1404\n164.0000\t1065\n164.0000\t1371\n164.0000\t365\n164.0000\t377\n164.0000\t989\n164.0000\t1164\n164.0000\t1388\n164.0000\t351\n164.0000\t196\n164.0000\t50\n164.0000\t1520\n164.0000\t121\n164.0000\t321\n164.0000\t1488\n164.0000\t851\n163.0000\t591\n163.0000\t191\n163.0000\t269\n163.0000\t1309\n163.0000\t146\n163.0000\t430\n163.0000\t647\n163.0000\t1555\n163.0000\t754\n163.0000\t1348\n163.0000\t761\n163.0000\t1169\n163.0000\t779\n163.0000\t684\n163.0000\t63\n163.0000\t1034\n163.0000\t1239\n163.0000\t1277\n163.0000\t473\n163.0000\t640\n163.0000\t557\n163.0000\t104\n163.0000\t1476\n163.0000\t1469\n163.0000\t1352\n163.0000\t1001\n163.0000\t131\n163.0000\t361\n163.0000\t332\n163.0000\t1220\n162.0000\t10\n162.0000\t729\n162.0000\t628\n162.0000\t175\n162.0000\t845\n162.0000\t431\n162.0000\t1442\n162.0000\t1289\n162.0000\t520\n162.0000\t507\n162.0000\t1329\n162.0000\t834\n162.0000\t295\n162.0000\t154\n162.0000\t919\n162.0000\t1221\n162.0000\t248\n162.0000\t1160\n162.0000\t750\n162.0000\t1142\n162.0000\t338\n162.0000\t65\n161.0000\t673\n161.0000\t955\n161.0000\t356\n161.0000\t632\n161.0000\t524\n161.0000\t988\n161.0000\t174\n161.0000\t80\n161.0000\t1522\n"},{"type":"HTML","data":"<div class=\"result-alert alert-warning\" role=\"alert\"><button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button><strong>Output is truncated</strong> to 1000 rows. Learn more about <strong>common.max_count</strong></div>"}]},"apps":[],"jobName":"paragraph_1588505305526_943125045","id":"20200426-150318_263534503","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:337"},{"text":"%md\n\nMientras se resuleve nuestra consulta podéis ver su ejecución en [YARN](http://localhost:8088/cluster/) donde aparecerá como un proceso Tez.","user":"anonymous","dateUpdated":"2020-05-20T16:01:16+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Mientras se resuleve nuestra consulta podéis ver su ejecución en <a href=\"http://localhost:8088/cluster/\">YARN</a> donde aparecerá como un proceso Tez.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305561_1984402593","id":"20200426-150620_256694649","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:01:16+0000","dateFinished":"2020-05-20T16:01:16+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:338"},{"text":"%md\n\n# Sensores de tráfico (Santander)\n\nHagamos un pequeño ejemplo con datos obtenidos por nosotros... por ejemplo, datos de sensores de la ciudad de [Santander](http://datos.santander.es). Para este ejemplo, obtendremos los datos en formato [CSV] (http://datos.santander.es/api/rest/datasets/mediciones.csv) y en primera instancia nos los descargaremos a la máquina local en la que está corriendo el servicio Zeppelin.","user":"anonymous","dateUpdated":"2020-05-20T16:01:49+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<h1>Sensores de tráfico (Santander)</h1>\n<p>Hagamos un pequeño ejemplo con datos obtenidos por nosotros&hellip; por ejemplo, datos de sensores de la ciudad de <a href=\"http://datos.santander.es\">Santander</a>. Para este ejemplo, obtendremos los datos en formato <a href=\"http://datos.santander.es/api/rest/datasets/mediciones.csv\">CSV</a> y en primera instancia nos los descargaremos a la máquina local en la que está corriendo el servicio Zeppelin.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305565_1371491925","id":"20200426-152044_1535705322","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:01:49+0000","dateFinished":"2020-05-20T16:01:49+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:339"},{"text":"%sh\n\nwget http://datos.santander.es/api/rest/datasets/mediciones.csv\n","user":"anonymous","dateUpdated":"2020-05-03T11:49:40+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"--2020-05-03 11:49:41--  http://datos.santander.es/api/rest/datasets/mediciones.csv\nResolving datos.santander.es (datos.santander.es)... 194.224.167.58\nConnecting to datos.santander.es (datos.santander.es)|194.224.167.58|:80... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 83400 (81K) [text/csv]\nSaving to: ‘mediciones.csv’\n\n     0K .......... .......... .......... .......... .......... 61%  245K 0s\n    50K .......... .......... .......... .                    100%  840K=0.2s\n\n2020-05-03 11:49:41 (337 KB/s) - ‘mediciones.csv’ saved [83400/83400]\n\n"}]},"apps":[],"jobName":"paragraph_1588505305565_195891538","id":"20200426-151417_1243981676","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:49:41+0000","dateFinished":"2020-05-03T11:49:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:340"},{"text":"%sh\n\nls -l","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"total 84\n-rw-r--r-- 1 zeppelin hadoop 83124 Apr 26 15:17 mediciones.csv\n"}]},"apps":[],"jobName":"paragraph_1588505305566_-1303782637","id":"20200426-151553_792149375","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:341"},{"text":"%sh\n\nhead mediciones.csv\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"dc:identifier,dc:modified,ayto:medida,ayto:idSensor,ayto:intensidad,ayto:ocupacion,ayto:carga,uri\n1001-d79b1a5d-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1001,1001,60,2,4,http://datos.santander.es/api/datos/mediciones/1001-d79b1a5d-87d0-11ea-944f-005056a43242.csv\n1002-d79c497b-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1002,1002,0,0,0,http://datos.santander.es/api/datos/mediciones/1002-d79c497b-87d0-11ea-944f-005056a43242.csv\n1003-d79d6be4-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1003,1003,60,0,1,http://datos.santander.es/api/datos/mediciones/1003-d79d6be4-87d0-11ea-944f-005056a43242.csv\n1004-d79e6ea3-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1004,1004,240,2,6,http://datos.santander.es/api/datos/mediciones/1004-d79e6ea3-87d0-11ea-944f-005056a43242.csv\n1005-d79fc283-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1005,1005,697,10,25,http://datos.santander.es/api/datos/mediciones/1005-d79fc283-87d0-11ea-944f-005056a43242.csv\n1006-d7a0abe3-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1006,1006,0,0,0,http://datos.santander.es/api/datos/mediciones/1006-d7a0abe3-87d0-11ea-944f-005056a43242.csv\n1007-d7a19c1f-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1007,1007,1888,29,53,http://datos.santander.es/api/datos/mediciones/1007-d7a19c1f-87d0-11ea-944f-005056a43242.csv\n1008-d7a29313-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1008,1008,0,0,0,http://datos.santander.es/api/datos/mediciones/1008-d7a29313-87d0-11ea-944f-005056a43242.csv\n1009-d7a38b53-87d0-11ea-944f-005056a43242,2020-04-26T15:13:00Z,1009,1009,120,2,5,http://datos.santander.es/api/datos/mediciones/1009-d7a38b53-87d0-11ea-944f-005056a43242.csv\n"}]},"apps":[],"jobName":"paragraph_1588505305588_-743323578","id":"20200426-151559_205172769","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:342"},{"text":"%md\n\nYa tenemos los datos y podemos inferir la estructura que tienen gracias a la primera fila, que contiene los nombres de los campos. Además, dado que sabemos distintguir entre lo que es una cadena de texto y un número además del hecho de ser un CSV separado por comas donde cada coma delimita el campo. \n\nEsta es la información que nosotros como gestores del sistema podemos aportar sobre los datos que recogemos. Los famosos metadatos con los que podemos generar una tabla para que contenga esta metainformación y así facilitar tareas posteriores sobre los mismos.\n","user":"anonymous","dateUpdated":"2020-05-20T16:03:35+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Ya tenemos los datos y podemos inferir la estructura que tienen gracias a la primera fila, que contiene los nombres de los campos. Además, dado que sabemos distintguir entre lo que es una cadena de texto y un número además del hecho de ser un CSV separado por comas donde cada coma delimita el campo.</p>\n<p>Esta es la información que nosotros como gestores del sistema podemos aportar sobre los datos que recogemos. Los famosos metadatos con los que podemos generar una tabla para que contenga esta metainformación y así facilitar tareas posteriores sobre los mismos.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305594_2020545262","id":"20200426-151744_2007798412","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:03:35+0000","dateFinished":"2020-05-20T16:03:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:343"},{"text":"%jdbc(hive)\n\nCREATE TABLE IF NOT EXISTS uoc.sensores_santander ( id String, modified date, medida int, idSensor String, intensidad int, ocupacion int, carga int, uri String  )\nCOMMENT 'Datos de os sensores de tráfico de la ciudad de Santander'\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ','\nLINES TERMINATED BY '\\n'\nSTORED AS TEXTFILE;","user":"anonymous","dateUpdated":"2020-05-03T11:45:38+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1588505305598_1406151419","id":"20200426-151920_257351596","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:45:38+0000","dateFinished":"2020-05-03T11:45:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:344"},{"text":"%md\n\nYa hemos creado nuestra tabla en la base de datos UOC (de ahí que el nombre de la tabla contenga *uoc.*) que se habrá traducido en la creación del directorio donde albergar los datos y, de forma paralela, registrado en Hive la metainformación sobre cómo leer los ficheros que en este directorio residen.\n","user":"anonymous","dateUpdated":"2020-05-20T16:05:08+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Ya hemos creado nuestra tabla en la base de datos UOC (de ahí que el nombre de la tabla contenga <em>uoc.</em>) que se habrá traducido en la creación del directorio donde albergar los datos y, de forma paralela, registrado en Hive la metainformación sobre cómo leer los ficheros que en este directorio residen.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305614_1036138806","id":"20200426-152519_920444066","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:05:08+0000","dateFinished":"2020-05-20T16:05:08+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:345"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive/uoc.db/sensores_santander\n","user":"anonymous","dateUpdated":"2020-05-03T11:47:35+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1588505305620_-1159863706","id":"20200426-152631_1983940711","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:47:36+0000","dateFinished":"2020-05-03T11:47:43+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:346"},{"text":"%jdbc(hive)\n\ndescribe formatted uoc.sensores_santander\n","user":"anonymous","dateUpdated":"2020-05-03T11:47:54+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"col_name":"string","data_type":"string","comment":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"col_name\tdata_type\tcomment\n# col_name\tdata_type\tcomment\nid\tstring\t\nmodified\tdate\t\nmedida\tint\t\nidsensor\tstring\t\nintensidad\tint\t\nocupacion\tint\t\ncarga\tint\t\nuri\tstring\t\n\tnull\tnull\n# Detailed Table Information\tnull\tnull\nDatabase:           \tuoc                 \tnull\nOwnerType:          \tUSER                \tnull\nOwner:              \thive                \tnull\nCreateTime:         \tSun May 03 11:45:40 UTC 2020\tnull\nLastAccessTime:     \tUNKNOWN             \tnull\nRetention:          \t0                   \tnull\nLocation:           \thdfs://sandbox-hdp.hortonworks.com:8020/warehouse/tablespace/managed/hive/uoc.db/sensores_santander\tnull\nTable Type:         \tMANAGED_TABLE       \tnull\nTable Parameters:\tnull\tnull\n\tCOLUMN_STATS_ACCURATE\t{\\\"BASIC_STATS\\\":\\\"true\\\",\\\"COLUMN_STATS\\\":{\\\"carga\\\":\\\"true\\\",\\\"id\\\":\\\"true\\\",\\\"idsensor\\\":\\\"true\\\",\\\"intensidad\\\":\\\"true\\\",\\\"medida\\\":\\\"true\\\",\\\"modified\\\":\\\"true\\\",\\\"ocupacion\\\":\\\"true\\\",\\\"uri\\\":\\\"true\\\"}}\n\tbucketing_version   \t2                   \n\tcomment             \tDatos de os sensores de tráfico de la ciudad de Santander\n\tnumFiles            \t0                   \n\tnumRows             \t0                   \n\trawDataSize         \t0                   \n\ttotalSize           \t0                   \n\ttransactional       \ttrue                \n\ttransactional_properties\tinsert_only         \n\ttransient_lastDdlTime\t1588506340          \n\tnull\tnull\n# Storage Information\tnull\tnull\nSerDe Library:      \torg.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe\tnull\nInputFormat:        \torg.apache.hadoop.mapred.TextInputFormat\tnull\nOutputFormat:       \torg.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat\tnull\nCompressed:         \tNo                  \tnull\nNum Buckets:        \t-1                  \tnull\nBucket Columns:     \t[]                  \tnull\nSort Columns:       \t[]                  \tnull\nStorage Desc Params:\tnull\tnull\n\tfield.delim         \t,                   \n\tline.delim          \t\\n                  \n\tserialization.format\t,                   \n"}]},"apps":[],"jobName":"paragraph_1588505305621_-221587162","id":"20200426-152729_188153542","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:47:55+0000","dateFinished":"2020-05-03T11:47:56+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:347"},{"text":"%md\n\nCon esto solo nos falta incluir los datos de las mediciones en el directorio y podremos lanzar nuestras SQL para obtener las mediciones, agregados o lo que requiramos de los ficheros de forma sencilla.\n","user":"anonymous","dateUpdated":"2020-05-03T11:49:02+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Con esto solo nos falta incluir los datos de las mediciones en el directorio y podremos lanzar nuestras SQL para obtener las mediciones, agregados o lo que requiramos de los ficheros de forma sencilla.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305621_576698393","id":"20200426-152822_1719560476","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:49:02+0000","dateFinished":"2020-05-03T11:49:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:348"},{"text":"%sh\n\nhdfs dfs -copyFromLocal mediciones.csv /warehouse/tablespace/managed/hive/uoc.db/sensores_santander/\n","user":"anonymous","dateUpdated":"2020-05-03T11:49:48+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1588505305635_626344105","id":"20200426-152909_1607686855","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:49:49+0000","dateFinished":"2020-05-03T11:50:02+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:349"},{"text":"%jdbc(hive)\n\nSELECT SUM(carga) AS carga, SUM(ocupacion) AS ocupacion, idsensor FROM uoc.sensores_santander GROUP BY idsensor\n","user":"anonymous","dateUpdated":"2020-05-03T11:50:09+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"carga":"string","ocupacion":"string","idsensor":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"carga\tocupacion\tidsensor\n0\t0\t1001\n0\t0\t1002\n10\t2\t1003\n7\t2\t1004\n35\t11\t1005\n58\t30\t1007\n0\t0\t1014\n5\t0\t1015\n2\t0\t1016\n3\t0\t1017\n52\t11\t1018\n54\t16\t1019\n14\t2\t1022\n14\t2\t1023\n4\t0\t1026\n0\t0\t1027\n0\t0\t1029\n11\t2\t1030\n4\t2\t1032\n11\t3\t1034\n6\t2\t1037\n7\t2\t1038\n10\t2\t1041\n58\t16\t1042\n0\t0\t1044\n5\t3\t1048\n0\t0\t1049\n0\t0\t1050\n0\t0\t1051\n76\t24\t1500\n55\t10\t1501\n0\t0\t1503\n3\t0\t1504\n4\t0\t1506\n4\t0\t1901\n5\t0\t1904\n52\t11\t1905\n43\t11\t1906\n54\t16\t1907\n12\t2\t1909\n4\t2\t2004\n2\t0\t2006\n4\t0\t2007\n28\t15\t2008\n5\t0\t2009\n2\t0\t2010\n21\t5\t2011\n41\t10\t2012\n10\t2\t2013\n8\t2\t2016\n4\t2\t2017\n0\t0\t2021\n6\t2\t2023\n5\t3\t2024\n2\t0\t2025\n7\t2\t2030\n4\t2\t2033\n6\t2\t2034\n6\t2\t2036\n7\t2\t2038\n11\t2\t2039\n5\t2\t2043\n6\t2\t2044\n5\t1\t2045\n93\t92\t2048\n0\t0\t2050\n62\t55\t2051\n0\t0\t2055\n31\t11\t2057\n0\t0\t2063\n5\t3\t2064\n6\t2\t2066\n0\t0\t2067\n0\t0\t2068\n30\t16\t2070\n33\t2\t2071\n17\t5\t2072\n12\t2\t2075\n43\t16\t2500\n47\t30\t2503\n5\t3\t2504\n9\t2\t2506\n7\t2\t2508\n0\t0\t2510\n28\t15\t2512\n5\t0\t2515\n6\t2\t2520\n3\t2\t2521\n9\t2\t2523\n6\t2\t2524\n6\t1\t2901\n41\t10\t2904\n2\t0\t2911\n6\t2\t2912\n8\t2\t2913\n5\t2\t2914\n20\t3\t3001\n20\t5\t3002\n0\t0\t3004\n7\t2\t3008\n4\t2\t3010\n0\t0\t3011\n0\t0\t3012\n0\t0\t3014\n11\t3\t3015\n0\t0\t3016\n14\t2\t3022\n5\t0\t3024\n6\t2\t3025\n22\t6\t3026\n0\t0\t3027\n54\t12\t3030\n25\t3\t3032\n20\t2\t3034\n25\t3\t3036\n25\t3\t3037\n15\t8\t3043\n16\t5\t3044\n6\t2\t3045\n10\t2\t3047\n25\t3\t3048\n25\t3\t3049\n20\t11\t3050\n0\t0\t3052\n8\t2\t3053\n0\t0\t3054\n0\t0\t3055\n20\t2\t3056\n7\t2\t3060\n9\t2\t3061\n0\t0\t3062\n0\t0\t3063\n6\t2\t3066\n51\t12\t3067\n0\t0\t3068\n0\t0\t3069\n0\t0\t3071\n4\t0\t3073\n7\t2\t3077\n0\t0\t3078\n2\t0\t3079\n4\t2\t3080\n25\t3\t3084\n25\t3\t3085\n66\t10\t3088\n25\t3\t3089\n42\t24\t3090\n16\t2\t3509\n35\t7\t3510\n6\t2\t3512\n6\t2\t3513\n9\t0\t3519\n16\t3\t3522\n0\t0\t3524\n0\t0\t3525\n0\t0\t3527\n11\t2\t3535\n11\t2\t3536\n9\t0\t3544\n9\t0\t3545\n0\t0\t3547\n7\t2\t3548\n0\t0\t3901\n2\t0\t3906\n7\t3\t3907\n4\t2\t3908\n53\t11\t3911\n12\t2\t3916\n9\t0\t3921\n0\t0\t3922\n6\t2\t3923\n0\t0\t3924\n4\t2\t4001\n6\t2\t4006\n4\t2\t4007\n4\t2\t4008\n12\t2\t4010\n0\t0\t4011\n0\t0\t4016\n7\t1\t4020\n6\t2\t4022\n9\t3\t4024\n7\t1\t4025\n0\t0\t4026\n4\t2\t4027\n0\t0\t4030\n2\t0\t4032\n0\t0\t4033\n27\t8\t4034\n0\t0\t5003\n0\t0\t5009\n10\t2\t5014\n0\t0\t5017\n0\t0\t5020\n0\t0\t5021\n0\t0\t5023\n4\t2\t6003\n4\t2\t6005\n0\t0\t6006\n0\t0\t6007\n27\t26\t6008\n0\t0\t6011\n0\t0\t6013\n0\t0\t6014\n24\t20\t6015\n4\t3\t6018\n0\t0\t6019\n24\t20\t6024\n4\t0\t7001\n2\t0\t7003\n2\t0\t7007\n2\t0\t7008\n0\t0\t7009\n8\t2\t7011\n6\t2\t7012\n2\t0\t7014\n0\t0\t7015\n2\t0\t7016\n2\t0\t7018\n9\t0\t7019\n0\t0\t7020\n7\t2\t7022\n19\t3\t7027\n0\t0\t7030\n4\t2\t7031\n0\t0\t7032\n20\t4\t7037\n0\t0\t7038\n0\t0\t7041\n0\t0\t7042\n0\t0\t7043\n0\t0\t7044\n0\t0\t7045\n6\t2\t7501\n6\t2\t7503\n6\t2\t7505\n4\t0\t7508\n0\t0\t7902\n6\t2\t7903\n6\t2\t7904\n5\t1\t7906\n5\t1\t1006\n2\t0\t1008\n7\t2\t1009\n49\t20\t1010\n53\t10\t1011\n3\t2\t1012\n40\t11\t1013\n0\t0\t1020\n6\t2\t1021\n14\t2\t1024\n8\t2\t1025\n0\t0\t1028\n5\t2\t1031\n4\t2\t1033\n5\t2\t1035\n0\t0\t1036\n0\t0\t1039\n5\t1\t1040\n12\t2\t1043\n0\t0\t1045\n0\t0\t1046\n5\t2\t1047\n0\t0\t1505\n2\t0\t1507\n2\t0\t1508\n10\t2\t1902\n4\t2\t1903\n10\t2\t1908\n7\t3\t2001\n7\t3\t2002\n7\t3\t2003\n2\t0\t2005\n62\t55\t2014\n33\t10\t2015\n47\t30\t2018\n0\t0\t2019\n0\t0\t2022\n5\t0\t2026\n0\t0\t2028\n5\t2\t2029\n4\t2\t2032\n14\t2\t2035\n9\t2\t2037\n4\t0\t2040\n0\t0\t2041\n44\t29\t2042\n29\t20\t2046\n21\t5\t2047\n0\t0\t2049\n0\t0\t2052\n0\t0\t2053\n0\t0\t2054\n99\t99\t2056\n0\t0\t2058\n10\t2\t2059\n20\t10\t2060\n4\t0\t2061\n0\t0\t2062\n6\t2\t2065\n10\t2\t2069\n3\t1\t2073\n6\t1\t2074\n10\t2\t2076\n0\t0\t2077\n9\t2\t2078\n0\t0\t2079\n0\t0\t2080\n0\t0\t2081\n6\t2\t2501\n4\t0\t2502\n2\t0\t2505\n6\t2\t2507\n21\t5\t2509\n28\t15\t2511\n7\t2\t2513\n2\t0\t2514\n4\t0\t2516\n7\t2\t2517\n6\t2\t2518\n7\t2\t2519\n9\t2\t2522\n5\t0\t2902\n2\t0\t2903\n12\t2\t2905\n4\t2\t2906\n5\t3\t2907\n5\t0\t2908\n10\t2\t2909\n12\t2\t2910\n0\t0\t2915\n47\t30\t2930\n6\t2\t2931\n6\t2\t2932\n23\t3\t3003\n9\t1\t3005\n0\t0\t3006\n11\t2\t3007\n7\t2\t3009\n9\t0\t3013\n11\t3\t3017\n0\t0\t3018\n0\t0\t3019\n16\t3\t3020\n11\t3\t3021\n0\t0\t3023\n9\t2\t3028\n43\t11\t3029\n54\t12\t3031\n25\t3\t3033\n25\t3\t3035\n6\t2\t3038\n0\t0\t3039\n0\t0\t3040\n0\t0\t3041\n6\t2\t3042\n15\t3\t3046\n0\t0\t3051\n25\t3\t3057\n25\t3\t3058\n12\t2\t3059\n11\t3\t3064\n16\t2\t3065\n0\t0\t3070\n18\t2\t3072\n25\t3\t3074\n20\t2\t3075\n0\t0\t3076\n4\t2\t3081\n25\t3\t3083\n25\t3\t3086\n0\t0\t3087\n7\t2\t3091\n17\t4\t3092\n0\t0\t3093\n0\t0\t3094\n6\t2\t3511\n0\t0\t3518\n16\t3\t3523\n0\t0\t3526\n0\t0\t3531\n0\t0\t3532\n0\t0\t3537\n20\t3\t3538\n0\t0\t3539\n0\t0\t3543\n9\t0\t3546\n0\t0\t3549\n7\t3\t3902\n64\t11\t3903\n17\t4\t3904\n25\t3\t3905\n0\t0\t3909\n0\t0\t3910\n14\t2\t3912\n7\t2\t3913\n16\t2\t3914\n6\t2\t3915\n11\t3\t3917\n40\t21\t3918\n16\t3\t3919\n8\t2\t3920\n4\t2\t3925\n0\t0\t4002\n5\t1\t4003\n0\t0\t4004\n4\t2\t4005\n0\t0\t4009\n0\t0\t4013\n0\t0\t4014\n0\t0\t4015\n4\t2\t4017\n94\t91\t4018\n4\t2\t4019\n2\t0\t4021\n4\t2\t4023\n0\t0\t4028\n6\t2\t4029\n4\t2\t4031\n20\t3\t4035\n0\t0\t5001\n0\t0\t5002\n32\t29\t5004\n0\t0\t5005\n0\t0\t5006\n0\t0\t5007\n0\t0\t5008\n0\t0\t5010\n0\t0\t5013\n0\t0\t5015\n0\t0\t5016\n0\t0\t5018\n0\t0\t5019\n0\t0\t5022\n0\t0\t5024\n0\t0\t5025\n0\t0\t5026\n2\t1\t5027\n0\t0\t5028\n0\t0\t5029\n0\t0\t6001\n0\t0\t6002\n0\t0\t6004\n0\t0\t6009\n14\t7\t6010\n0\t0\t6012\n27\t26\t6016\n0\t0\t6017\n0\t0\t6020\n0\t0\t6021\n0\t0\t6022\n0\t0\t6023\n2\t0\t7002\n0\t0\t7004\n12\t2\t7005\n0\t0\t7006\n5\t1\t7010\n6\t2\t7013\n7\t2\t7017\n2\t0\t7021\n4\t2\t7023\n2\t0\t7024\n0\t0\t7025\n0\t0\t7026\n9\t2\t7028\n17\t4\t7029\n2\t0\t7033\n11\t2\t7034\n0\t0\t7035\n0\t0\t7036\n0\t0\t7039\n0\t0\t7040\n10\t2\t7502\n10\t2\t7504\n0\t0\t7506\n6\t2\t7507\n14\t4\t7509\n2\t0\t7901\n2\t0\t7905\n2\t0\t7907\nnull\tnull\tayto:idSensor\n"}]},"apps":[],"jobName":"paragraph_1588505305637_149639002","id":"20200426-152935_166568182","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:50:10+0000","dateFinished":"2020-05-03T11:51:23+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:350"},{"text":"%md\n\nDado que en esencia se sigue tratando de ficheros en directorios, esto nos permitiría seguir añadiendo ficheros y que nuestras consultas sigan resolviendose de forma dinámica. \n\nPodéis probar a añadir tantos CSVs como queráis y las consultas irán variando en base a los datos interpretados. Pero tened cuidado... \n","user":"anonymous","dateUpdated":"2020-05-20T16:06:22+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Dado que en esencia se sigue tratando de ficheros en directorios, esto nos permitiría seguir añadiendo ficheros y que nuestras consultas sigan resolviendose de forma dinámica.</p>\n<p>Podéis probar a añadir tantos CSVs como queráis y las consultas irán variando en base a los datos interpretados. Pero tened cuidado&hellip;</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305641_55675543","id":"20200426-153101_1755206541","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:06:22+0000","dateFinished":"2020-05-20T16:06:22+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:351"},{"text":"%jdbc(hive)\n\nSELECT SUM(carga) AS carga, SUM(ocupacion) AS ocupacion, idsensor FROM uoc.sensores_santander WHERE idsensor LIKE '%ayto:%' GROUP BY idsensor\n","user":"anonymous","dateUpdated":"2020-05-03T11:28:25+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"carga":"string","ocupacion":"string","idsensor":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"carga\tocupacion\tidsensor\nnull\tnull\tayto:idSensor\n"}]},"apps":[],"jobName":"paragraph_1588505305648_491617564","id":"20200426-153342_615721922","dateCreated":"2020-05-03T11:28:25+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:352"},{"text":"%md\n\n¡Exacto! Las cabeceras del CSV no son más que otra fila a procesar de nuestro CSV. Por ello es más natural encontrarnos la información de este tipo de entornos en formatos que contengan la metainformación embebida pero de forma más fácil de procesar. Algo como un XML, JSON, PARQUET u ORC. Estos son formatos algo más comunes en estos entornos.\n\nTambién hay que tener cuidado con las tablas gestionadas como es esta, dado que Hive es quien la gestiona y si hacemos un DROP de la tabla... En realidad estaremos eliminando la tabla al completo, es decir: los metadatos sobre los ficheros y la carpeta con todos los datos que esta contenga. Para evitar esto es mejor emplear tablas externas dado que nos permite separar efectivamente los metadatos de los datos y evitar borrados accidentales. O imponer esquemas distintos a voluntad.\n","user":"anonymous","dateUpdated":"2020-05-20T16:08:06+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>¡Exacto! Las cabeceras del CSV no son más que otra fila a procesar de nuestro CSV. Por ello es más natural encontrarnos la información de este tipo de entornos en formatos que contengan la metainformación embebida pero de forma más fácil de procesar. Algo como un XML, JSON, PARQUET u ORC. Estos son formatos algo más comunes en estos entornos.</p>\n<p>También hay que tener cuidado con las tablas gestionadas como es esta, dado que Hive es quien la gestiona y si hacemos un DROP de la tabla&hellip; En realidad estaremos eliminando la tabla al completo, es decir: los metadatos sobre los ficheros y la carpeta con todos los datos que esta contenga. Para evitar esto es mejor emplear tablas externas dado que nos permite separar efectivamente los metadatos de los datos y evitar borrados accidentales. O imponer esquemas distintos a voluntad.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305648_-644082550","id":"20200426-153440_813387569","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:08:06+0000","dateFinished":"2020-05-20T16:08:06+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:353"},{"text":"%jdbc(hive)\n\nCREATE EXTERNAL TABLE IF NOT EXISTS uoc.sensores_santander_ext ( id String, modified date, medida int, idSensor String, intensidad int, ocupacion int, carga int, uri String, otra_columna_que_no_existe string  ) \nPARTITIONED BY(dia_de_proceso string)\nROW FORMAT DELIMITED\nFIELDS TERMINATED BY ','\nLINES TERMINATED BY '\\n'\nSTORED AS TEXTFILE\nLOCATION '/warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/';\n","user":"anonymous","dateUpdated":"2020-05-03T11:55:11+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1588505305655_-1462479377","id":"20200426-153607_644629022","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:55:11+0000","dateFinished":"2020-05-03T11:55:12+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:354"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/\n","user":"anonymous","dateUpdated":"2020-05-03T11:55:19+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1588505305657_-1845609840","id":"20200426-154039_351021373","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:55:19+0000","dateFinished":"2020-05-03T11:55:27+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:355"},{"text":"%md\n\nEsta tabla la hemos creado particionada, eso quiere decir que bajo el directorio de la tabla podremos ordenar en subcarpetas la información acorde al criterio elegido. Esto permite que podamos filtrar subconjuntos de la información contenida de forma sencilla. \n\nNos permitirá tanto organizar mejor los datos como agilizar nuestras consultas cuando se indique la partición en la clausula *WHERE*, ya que Hive sabrá qué carpeta es la única que debe tocar y obviará el resto de los directorios.\n","user":"anonymous","dateUpdated":"2020-05-20T16:09:00+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Esta tabla la hemos creado particionada, eso quiere decir que bajo el directorio de la tabla podremos ordenar en subcarpetas la información acorde al criterio elegido. Esto permite que podamos filtrar subconjuntos de la información contenida de forma sencilla.</p>\n<p>Nos permitirá tanto organizar mejor los datos como agilizar nuestras consultas cuando se indique la partición en la clausula <em>WHERE</em>, ya que Hive sabrá qué carpeta es la única que debe tocar y obviará el resto de los directorios.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305657_459239563","id":"20200426-155701_1038046305","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:09:00+0000","dateFinished":"2020-05-20T16:09:00+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:356"},{"text":"%sh\n\nhdfs dfs -mkdir /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/dia_de_proceso=hoy/","user":"anonymous","dateUpdated":"2020-05-03T11:57:51+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1588505305661_1547522455","id":"20200426-154646_663810196","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:57:51+0000","dateFinished":"2020-05-03T11:57:59+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:357"},{"text":"%sh\n\nhdfs dfs -cp /warehouse/tablespace/managed/hive/uoc.db/sensores_santander/mediciones.csv /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/dia_de_proceso=hoy/\n","user":"anonymous","dateUpdated":"2020-05-03T11:58:03+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[]},"apps":[],"jobName":"paragraph_1588505305666_-1291717500","id":"20200426-154439_2082323575","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:58:03+0000","dateFinished":"2020-05-03T11:58:11+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:358"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/dia_de_proceso=hoy/","user":"anonymous","dateUpdated":"2020-05-03T11:58:52+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 1 items\n-rw-rw-rw-+  1 zeppelin hadoop      83400 2020-05-03 11:58 /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext/dia_de_proceso=hoy/mediciones.csv\n"}]},"apps":[],"jobName":"paragraph_1588505305668_-718814047","id":"20200426-154624_1934527844","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:58:52+0000","dateFinished":"2020-05-03T11:59:03+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:359"},{"text":"%jdbc(hive)\n\nSELECT * FROM uoc.sensores_santander_ext WHERE dia_de_proceso  = \"hoy\" LIMIT 10;\n","user":"anonymous","dateUpdated":"2020-05-03T11:59:06+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"sensores_santander_ext.id":"string","sensores_santander_ext.modified":"string","sensores_santander_ext.medida":"string","sensores_santander_ext.idsensor":"string","sensores_santander_ext.intensidad":"string","sensores_santander_ext.ocupacion":"string","sensores_santander_ext.carga":"string","sensores_santander_ext.uri":"string","sensores_santander_ext.otra_columna_que_no_existe":"string","sensores_santander_ext.dia_de_proceso":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"sensores_santander_ext.id\tsensores_santander_ext.modified\tsensores_santander_ext.medida\tsensores_santander_ext.idsensor\tsensores_santander_ext.intensidad\tsensores_santander_ext.ocupacion\tsensores_santander_ext.carga\tsensores_santander_ext.uri\tsensores_santander_ext.otra_columna_que_no_existe\tsensores_santander_ext.dia_de_proceso\n"}]},"apps":[],"jobName":"paragraph_1588505305675_733868900","id":"20200426-154730_1305215690","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T11:59:06+0000","dateFinished":"2020-05-03T11:59:09+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:360"},{"text":"%md\n\nPero si los datos están ahí ¿cómo es que no se ven?\n\nNos falta un último fleco... Debemos informar a Hive, más bien a su almacén de metadatos, de la existencia de esta partición para que sepa que puede mirar en la carpeta correspondiente. Esto se hace con un sencillo comando como vemos a continuación.\n","user":"anonymous","dateUpdated":"2020-05-20T16:09:54+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Pero si los datos están ahí ¿cómo es que no se ven?</p>\n<p>Nos falta un último fleco&hellip; Debemos informar a Hive, más bien a su almacén de metadatos, de la existencia de esta partición para que sepa que puede mirar en la carpeta correspondiente. Esto se hace con un sencillo comando como vemos a continuación.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305675_1936348461","id":"20200426-155857_30052530","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:09:54+0000","dateFinished":"2020-05-20T16:09:54+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:361"},{"text":"%jdbc(hive)\n\nALTER TABLE uoc.sensores_santander_ext ADD PARTITION (dia_de_proceso='hoy');","user":"anonymous","dateUpdated":"2020-05-03T12:00:34+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1588505305679_-756469805","id":"20200426-154809_1396952035","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T12:00:34+0000","dateFinished":"2020-05-03T12:00:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:362"},{"text":"%jdbc(hive)\n\nSELECT * FROM uoc.sensores_santander_ext WHERE dia_de_proceso  = \"hoy\" LIMIT 10;\n","user":"anonymous","dateUpdated":"2020-05-03T12:00:53+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{"0":{"graph":{"mode":"table","height":300,"optionOpen":false,"setting":{"table":{"tableGridState":{},"tableColumnTypeState":{"names":{"sensores_santander_ext.id":"string","sensores_santander_ext.modified":"string","sensores_santander_ext.medida":"string","sensores_santander_ext.idsensor":"string","sensores_santander_ext.intensidad":"string","sensores_santander_ext.ocupacion":"string","sensores_santander_ext.carga":"string","sensores_santander_ext.uri":"string","sensores_santander_ext.otra_columna_que_no_existe":"string","sensores_santander_ext.dia_de_proceso":"string"},"updated":false},"tableOptionSpecHash":"[{\"name\":\"useFilter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable filter for columns\"},{\"name\":\"showPagination\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable pagination for better navigation\"},{\"name\":\"showAggregationFooter\",\"valueType\":\"boolean\",\"defaultValue\":false,\"widget\":\"checkbox\",\"description\":\"Enable a footer for displaying aggregated values\"}]","tableOptionValue":{"useFilter":false,"showPagination":false,"showAggregationFooter":false},"updated":false,"initialized":false}},"commonSetting":{}}}},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TABLE","data":"sensores_santander_ext.id\tsensores_santander_ext.modified\tsensores_santander_ext.medida\tsensores_santander_ext.idsensor\tsensores_santander_ext.intensidad\tsensores_santander_ext.ocupacion\tsensores_santander_ext.carga\tsensores_santander_ext.uri\tsensores_santander_ext.otra_columna_que_no_existe\tsensores_santander_ext.dia_de_proceso\ndc:identifier\tnull\tnull\tayto:idSensor\tnull\tnull\tnull\turi\tnull\thoy\n3048-1673ac54-8d34-11ea-9c43-005056a43242\tnull\t3048\t3048\t300\t3\t25\thttp://datos.santander.es/api/datos/mediciones/3048-1673ac54-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3049-1675093f-8d34-11ea-9c43-005056a43242\tnull\t3049\t3049\t300\t3\t25\thttp://datos.santander.es/api/datos/mediciones/3049-1675093f-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3050-16762d84-8d34-11ea-9c43-005056a43242\tnull\t3050\t3050\t111\t11\t20\thttp://datos.santander.es/api/datos/mediciones/3050-16762d84-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3051-16773531-8d34-11ea-9c43-005056a43242\tnull\t3051\t3051\t0\t0\t0\thttp://datos.santander.es/api/datos/mediciones/3051-16773531-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3052-16784481-8d34-11ea-9c43-005056a43242\tnull\t3052\t3052\t0\t0\t0\thttp://datos.santander.es/api/datos/mediciones/3052-16784481-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3053-16795d83-8d34-11ea-9c43-005056a43242\tnull\t3053\t3053\t180\t2\t8\thttp://datos.santander.es/api/datos/mediciones/3053-16795d83-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3054-167a726a-8d34-11ea-9c43-005056a43242\tnull\t3054\t3054\t0\t0\t0\thttp://datos.santander.es/api/datos/mediciones/3054-167a726a-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3055-167b78d5-8d34-11ea-9c43-005056a43242\tnull\t3055\t3055\t0\t0\t0\thttp://datos.santander.es/api/datos/mediciones/3055-167b78d5-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n3056-167c9429-8d34-11ea-9c43-005056a43242\tnull\t3056\t3056\t240\t2\t20\thttp://datos.santander.es/api/datos/mediciones/3056-167c9429-8d34-11ea-9c43-005056a43242.csv\tnull\thoy\n"}]},"apps":[],"jobName":"paragraph_1588505305686_946480267","id":"20200426-154958_2147118518","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T12:00:54+0000","dateFinished":"2020-05-03T12:00:55+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:363"},{"text":"%md\n\nSi os fijais, ahora ya vemos la tabla al completo donde hay... muchas cosas que observar:\n- La carpeta de la partición aparece como una columna común a todas las filas\n- La fecha, no ha sido capaz de interpretarla ¿se os ocurre por qué?\n- La cabecera es una fila más que deberemos filtrar debido al uso del formato CSV\n- Hemos indicado una columna inexistente y aun así, la ha incluido y puesto a null todos los valores... ¡Claro, no existe ese campo!\n\nComo veis, Hive nos da mucha flexibilidad a la hora de organizar nuestra información en formas tabulares pero es muy importante saber lo que se está haciendo para obtener el máximo beneficio de esta tecnología y no cometer errores que puedan convertir nuestro preciado lago en un [cenagal](https://www.forbes.com/sites/danielnewman/2017/02/21/6-steps-to-clean-up-your-data-swamp/#655c87b74cf9).","user":"anonymous","dateUpdated":"2020-05-20T16:11:18+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Si os fijais, ahora ya vemos la tabla al completo donde hay&hellip; muchas cosas que observar:</p>\n<ul>\n<li>La carpeta de la partición aparece como una columna común a todas las filas</li>\n<li>La fecha, no ha sido capaz de interpretarla ¿se os ocurre por qué?</li>\n<li>La cabecera es una fila más que deberemos filtrar debido al uso del formato CSV</li>\n<li>Hemos indicado una columna inexistente y aun así, la ha incluido y puesto a null todos los valores&hellip; ¡Claro, no existe ese campo!</li>\n</ul>\n<p>Como veis, Hive nos da mucha flexibilidad a la hora de organizar nuestra información en formas tabulares pero es muy importante saber lo que se está haciendo para obtener el máximo beneficio de esta tecnología y no cometer errores que puedan convertir nuestro preciado lago en un <a href=\"https://www.forbes.com/sites/danielnewman/2017/02/21/6-steps-to-clean-up-your-data-swamp/#655c87b74cf9\">cenagal</a>.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305686_-1796943796","id":"20200426-155248_1027839208","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-20T16:11:18+0000","dateFinished":"2020-05-20T16:11:18+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:364"},{"text":"%jdbc(hive)\n\nDROP TABLE uoc.sensores_santander;\nDROP TABLE uoc.sensores_santander_ext;","user":"anonymous","dateUpdated":"2020-05-03T12:05:22+0000","config":{"editorSetting":{"language":"sql","editOnDblClick":false,"completionSupport":true},"colWidth":12,"editorMode":"ace/mode/sql","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"},{"type":"TEXT","data":"Query executed successfully. Affected rows : -1"}]},"apps":[],"jobName":"paragraph_1588505305695_464075347","id":"20200426-155014_393063019","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T12:05:22+0000","dateFinished":"2020-05-03T12:05:25+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:365"},{"text":"%sh\n\nhdfs dfs -ls /warehouse/tablespace/managed/hive/uoc.db/\n","user":"anonymous","dateUpdated":"2020-05-03T12:05:30+0000","config":{"editorSetting":{"language":"sh","editOnDblClick":false,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/sh","fontSize":9,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"TEXT","data":"Found 1 items\ndrwxrwxrwx+  - hive hadoop          0 2020-05-03 11:57 /warehouse/tablespace/managed/hive/uoc.db/sensores_santander_ext\n"}]},"apps":[],"jobName":"paragraph_1588505305696_-1284333947","id":"20200426-155123_1679385778","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T12:05:30+0000","dateFinished":"2020-05-03T12:05:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:366"},{"text":"%md\n\nComo veis, los datos de nuestra tabla externa siguen estando ahí.\n\nEspero os haya gustado este breve notebook sobre el modelado en Hive y sus posibilidades.\n","user":"anonymous","dateUpdated":"2020-05-03T12:06:05+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":true,"completionSupport":false},"colWidth":12,"editorMode":"ace/mode/markdown","fontSize":9,"editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<p>Como veis, los datos de nuestra tabla externa siguen estando ahí.</p>\n<p>Espero os haya gustado este breve notebook sobre el modelado en Hive y sus posibilidades.</p>\n"}]},"apps":[],"jobName":"paragraph_1588505305700_954796969","id":"20200426-155159_1084672238","dateCreated":"2020-05-03T11:28:25+0000","dateStarted":"2020-05-03T12:06:05+0000","dateFinished":"2020-05-03T12:06:05+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:367"}],"name":"Guía de modelado usando Hive","id":"2F7YRBCSR","noteParams":{},"noteForms":{},"angularObjects":{"md:shared_process":[],"sh:shared_process":[],"jdbc:shared_process":[]},"config":{"isZeppelinNotebookCronEnable":false,"looknfeel":"default","personalizedMode":"false"},"info":{}}